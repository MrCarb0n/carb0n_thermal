# =====================================================================
#  THERMAL ENGINE CONFIG • MSM8953 (Redmi Note 4 / MIDO)
#  MIDO NEVER DIES — FINAL SMOOTH THROTTLING EDITION (v2.7, 2025)
#
#  Author : TIash (@MrCarb0n)
#  Gist   : https://gist.github.com/MrCarb0n/6d33ed41ffe60c3c72cd39951c4f0fde
#  Version: v2.7 • Smooth & Balanced Performance
# =====================================================================

# -----------------------------
# BATTERY CHARGING CONTROL
# Smooth charging and thermal management
# -----------------------------
[BATTERY_CHARGING_CTL]
algo_type       monitor
sampling        6000
sensor          case-therm-adc
thresholds      42000 43000 44000 45000 46000 47000 48000 49000 50000 51000 52000 53000 54000 55000 56000 57000 58000 59000 60000
thresholds_clr  40000 41000 42000 43000 44000 45000 46000 47000 48000 49000 50000 51000 52000 53000 54000 55000 56000 57000 58000
actions         battery battery battery battery battery battery battery battery battery battery battery battery battery battery battery battery battery battery battery
action_info     1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19

# -----------------------------
# CPU CASE TEMPERATURE MANAGEMENT
# Controls thermal throttling per cluster
# -----------------------------
[SS-CASE-THERM-CLUSTER0]
algo_type       ss
sampling        4000
sensor          case-therm-adc
device          cpu0
set_point       48000 48500 49000 49500 50000
set_point_clr   47000 47500 48000 48500 49000
time_constant   300
device_max_limit 2016000

[SS-CASE-THERM-CLUSTER1]
algo_type       ss
sampling        4000
sensor          case-therm-adc
device          cpu4
set_point       48000 48500 49000 49500 50000
set_point_clr   47000 47500 48000 48500 49000
time_constant   300
device_max_limit 2016000

# -----------------------------
# VIRTUAL CPU MONITOR
# Aggregates all cores for general thermal control
# -----------------------------
[CPU_MONITOR]
algo_type       monitor
sampling        1000
sensor          VIRTUAL-CPU
thresholds      75000 76000 77000 78000 79000 80000 81000 82000 83000 84000 85000 86000 87000 88000
thresholds_clr  74000 75000 76000 77000 78000 79000 80000 81000 82000 83000 84000 85000 86000 87000
actions         cpu cpu cpu cpu cpu cpu cpu cpu cpu cpu cpu cpu cpu shutdown
action_info     1 2 3 4 5 6 7 8 9 10 11 12 13 0

# -----------------------------
# PER-CORE CPU CONTROL
# Fine-grained steady-state thermal management
# -----------------------------
[SS-CPU0]
algo_type       ss
sampling        200
sensor          apc0-cpu0-usr
device          cpu0
set_point       80000 81000 82000 83000 84000
set_point_clr   79000 80000 81000 82000 83000
time_constant   200

[SS-CPU1]
algo_type       ss
sampling        200
sensor          apc0-cpu1-usr
device          cpu1
set_point       80000 81000 82000 83000 84000
set_point_clr   79000 80000 81000 82000 83000
time_constant   200

[SS-CPU2]
algo_type       ss
sampling        200
sensor          apc0-cpu2-usr
device          cpu2
set_point       80000 81000 82000 83000 84000
set_point_clr   79000 80000 81000 82000 83000
time_constant   200

[SS-CPU3]
algo_type       ss
sampling        200
sensor          apc0-cpu3-usr
device          cpu3
set_point       80000 81000 82000 83000 84000
set_point_clr   79000 80000 81000 82000 83000
time_constant   200

[SS-CPU4]
algo_type       ss
sampling        200
sensor          apc1-cpu0-usr
device          cpu4
set_point       81000 82000 83000 84000 85000
set_point_clr   80000 81000 82000 83000 84000
time_constant   200

[SS-CPU5]
algo_type       ss
sampling        200
sensor          apc1-cpu1-usr
device          cpu5
set_point       81000 82000 83000 84000 85000
set_point_clr   80000 81000 82000 83000 84000
time_constant   200

[SS-CPU6]
algo_type       ss
sampling        200
sensor          apc1-cpu2-usr
device          cpu6
set_point       81000 82000 83000 84000 85000
set_point_clr   80000 81000 82000 83000 84000
time_constant   200

[SS-CPU7]
algo_type       ss
sampling        200
sensor          apc1-cpu3-usr
device          cpu7
set_point       81000 82000 83000 84000 85000
set_point_clr   80000 81000 82000 83000 84000
time_constant   200

# -----------------------------
# GPU CONTROL
# Fine-grained GPU thermal throttling
# -----------------------------
[SS-GPU]
algo_type       monitor
sampling        500
sensor          gpu0-usr
thresholds      76000 77000 78000 79000 80000 81000 82000 83000 84000 85000 86000 87000 88000
thresholds_clr  75000 76000 77000 78000 79000 80000 81000 82000 83000 84000 85000 86000 87000
actions         gpu gpu gpu gpu gpu gpu gpu gpu gpu gpu gpu gpu shutdown
action_info     1 2 3 4 5 6 7 8 9 10 11 12 0

# -----------------------------
# WLAN THERMAL MITIGATION
# -----------------------------
[WLAN_MITIGATION]
algo_type       monitor
sampling        6000
sensor          case-therm-adc
thresholds      52000 53000 54000 55000 56000 57000 58000
thresholds_clr  50000 51000 52000 53000 54000 55000 56000
actions         wlan wlan wlan wlan wlan wlan wlan
action_info     1 2 3 4 5 6 7

# -----------------------------
# MODEM POWER AMPLIFIER CONTROL
# -----------------------------
[MODEM_PA_MITIGATION]
algo_type       monitor
sampling        6000
sensor          case-therm-adc
thresholds      60000 61000 62000 63000 64000 65000 66000
thresholds_clr  58000 59000 60000 61000 62000 63000 64000
actions         modem modem modem modem modem modem modem
action_info     1 2 3 4 5 6 7

# -----------------------------
# CAMERA THERMAL MONITOR
# -----------------------------
[MONITOR-CAMERA-MSM]
algo_type       monitor
sampling        1000
sensor          camera-usr
thresholds      57000 58000 59000 60000 61000
thresholds_clr  55000 56000 57000 58000 59000
actions         camera camera camera camera camera
action_info     1 2 3 4 5

# -----------------------------
# SPEAKER THERMAL CONTROL
# -----------------------------
[SPEAKER_CAL_MITIGATION]
algo_type       monitor
sampling        5000
sensor          pa-therm
thresholds      63000 64500 66000 67500 69000
thresholds_clr  60000 61500 63000 64500 66000
actions         speaker speaker speaker speaker speaker
action_info     1 2 3 4 5

# -----------------------------
# BACKLIGHT CONTROL
# -----------------------------
[BACKLIGHT_AP_TEMP_MITIGATION]
algo_type       monitor
sampling        5000
sensor          case-therm-adc
thresholds      48000 49000 50000 51000 52000
thresholds_clr  46000 47000 48000 49000 50000
actions         lcd lcd lcd lcd lcd
action_info     1536 1280 1024 768 512

# -----------------------------
# LCD MONITOR
# -----------------------------
[LCD_MONITOR_STATE]
algo_type       monitor
sampling        5000
sensor          xo-therm-adc
thresholds      66000 67500 69000
thresholds_clr  63000 64500 66000
actions         lcd lcd lcd
action_info     20 15 10

# -----------------------------
# CASE THERMAL STATES
# -----------------------------
[CCC_AP_TEMP_MITIGATION]
algo_type       monitor
sampling        8000
sensor          case-therm-adc
thresholds      61000 62500 64000
thresholds_clr  59000 60500 62000
actions         temp_state temp_state temp_state
action_info     4 4 5

# -----------------------------
# EMERGENCY HIGH TEMPERATURE SHUTDOWN
# -----------------------------
[HIGH_TEMP_STATE]
algo_type       monitor
sampling        1000
sensor          xo-therm-adc
thresholds      90000
thresholds_clr  87000
actions         shutdown
action_info     0

# -----------------------------
# VIRTUAL CPU AVERAGING
# Aggregates multiple core readings for overall thermal logic
# -----------------------------
[VIRTUAL-CPU]
algo_type       virtual
trip_sensor     apc1-cpu0-usr
set_point       84000
set_point_clr   80000
sensors         apc1-cpu0-usr apc1-cpu1-usr apc1-cpu2-usr apc1-cpu3-usr apc1-l2-usr
sampling        200
math            2

# =====================================================================
#  END OF CONFIG
#  MIDO NEVER DIES — FINAL SMOOTH THROTTLING EDITION (v2.7, 2025)
#  BY TIash (@MrCarb0n)
#  https://gist.github.com/MrCarb0n/6d33ed41ffe60c3c72cd39951c4f0fde
# =====================================================================
